{% extends 'base.html' %}
{% load static %}

{% block content %}
<script>
    window.onload = function() {
        window.print();
    }
</script>

<div class="cv-container">

    <section id="perfil-section" style="margin-bottom: 40px;">
        <h2 class="header-title"><i class="fas fa-user-circle"></i> Perfil Profesional</h2>
        <div class="card">
            <h3 style="margin-top: 0; color: #1f2937;">Sobre mí</h3>
            <p style="font-size: 1.1rem; line-height: 1.6; color: #4b5563;">
                {{ perfil.descripcionperfil }}
            </p>
        </div>
        
        <div class="card">
            <h4 style="color: #2563eb; border-bottom: 1px solid #eee; padding-bottom: 10px; margin-top:0;">
                <i class="fas fa-id-card"></i> Información Personal
            </h4>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <p><strong>Cédula:</strong> {{ perfil.numerocedula }}</p>
                <p><strong>Email:</strong> {{ perfil.email_contacto }}</p>
                <p><strong>Teléfono:</strong> {{ perfil.telefono }}</p>
                <p><strong>Dirección:</strong> {{ perfil.direcciondomiciliaria }}</p>
            </div>
        </div>
    </section>

    {% if experiencias %}
    <section id="experiencia-section" style="margin-bottom: 40px; page-break-inside: avoid;">
        <h2 class="header-title"><i class="fas fa-briefcase"></i> Experiencia Laboral</h2>
        {% for exp in experiencias %}
            <div class="card" style="margin-bottom: 15px; page-break-inside: avoid;">
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <h3 style="margin: 0; color: #1e293b;">{{ exp.cargodesempenado }}</h3>
                    <span style="background: #eff6ff; color: #2563eb; padding: 4px 10px; border-radius: 10px; font-size: 0.8rem; font-weight: bold;">
                        {{ exp.fechainiciogestion|date:"M Y" }} - 
                        {% if exp.fechafingestion %}{{ exp.fechafingestion|date:"M Y" }}{% else %}Actualidad{% endif %}
                    </span>
                </div>
                <h4 style="margin: 5px 0 10px 0; color: #64748b; font-size: 0.95rem;">
                    {{ exp.nombrempresa }} | {{ exp.lugarempresa }}
                </h4>
                <p style="color: #475569; font-size: 0.95rem;">{{ exp.descripcionfunciones }}</p>
            </div>
        {% endfor %}
    </section>
    {% endif %}

    {% if cursos %}
    <section id="educacion-section" style="margin-bottom: 40px; page-break-inside: avoid;">
        <h2 class="header-title"><i class="fas fa-graduation-cap"></i> Educación y Cursos</h2>
        <div style="display: grid; grid-template-columns: 1fr; gap: 15px;">
        {% for curso in cursos %}
            <div class="card" style="margin-bottom: 0; page-break-inside: avoid;">
                <h3 style="margin: 0; font-size: 1.1rem;">{{ curso.nombrecurso }}</h3>
                <div style="color: #6b7280; font-size: 0.9rem; margin-bottom: 5px;">
                    <strong>{{ curso.entidadpatrocinadora }}</strong> | {{ curso.fechafin|date:"Y" }} | {{ curso.totalhoras }} Horas
                </div>
                <p style="margin: 5px 0; font-size: 0.9rem;">{{ curso.descripcioncurso }}</p>
            </div>
        {% endfor %}
        </div>
    </section>
    {% endif %}

    {% if reconocimientos %}
    <section id="logros-section" style="margin-bottom: 40px; page-break-inside: avoid;">
        <h2 class="header-title"><i class="fas fa-award"></i> Logros</h2>
        {% for reco in reconocimientos %}
            <div class="card" style="margin-bottom: 10px; page-break-inside: avoid;">
                <h3 style="margin: 0; font-size: 1rem;">{{ reco.descripcionreconocimiento }}</h3>
                <span style="font-size: 0.85rem; color: #0284c7;">
                     {{ reco.tiporeconocimiento }} - {{ reco.entidadpatrocinadora }} ({{ reco.fechareconocimiento|date:"Y" }})
                </span>
            </div>
        {% endfor %}
    </section>
    {% endif %}

    {% if productos_acad or productos_lab %}
    <section style="margin-bottom: 40px; page-break-inside: avoid;">
        <h2 class="header-title"><i class="fas fa-book"></i> Producción Intelectual</h2>
        {% for prod in productos_acad %}
            <div class="card" style="margin-bottom: 10px; page-break-inside: avoid;">
                <strong>{{ prod.nombrerecurso }}</strong> <span style="color:#666">({{ prod.clasificador }})</span>
                <p style="margin:5px 0; font-size:0.9rem;">{{ prod.descripcion }}</p>
            </div>
        {% endfor %}
        {% for prod in productos_lab %}
            <div class="card" style="margin-bottom: 10px; page-break-inside: avoid;">
                <strong>{{ prod.nombreproducto }}</strong> <span style="color:#666">({{ prod.fechaproducto|date:"Y" }})</span>
                <p style="margin:5px 0; font-size:0.9rem;">{{ prod.descripcion }}</p>
            </div>
        {% endfor %}
    </section>
    {% endif %}

    {% if garage %}
    <section style="margin-bottom: 40px; page-break-inside: avoid;">
        <h2 class="header-title"><i class="fas fa-store"></i> Venta de Garage</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px;">
        {% for item in garage %}
            <div class="card" style="margin-bottom: 0; border-left: 4px solid #10b981;">
                <strong>{{ item.nombreproducto }}</strong>
                <br>
                <small>${{ item.valordelbien }} - {{ item.estadoproducto }}</small>
            </div>
        {% endfor %}
        </div>
    </section>
    {% endif %}

</div>
{% endblock %}